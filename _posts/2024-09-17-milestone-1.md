---
layout: post
title: Milestone 1
---

## 1. Data Acquisition
### Instructions - (to delete!)
Write a brief tutorial on how your team downloaded the dataset. Imagine :) that you were searching for a guide on how to download the play-by-play data; your guide should make you go “Perfect - this is exactly what I was looking for!”. Include your function/class, and provide an example of using it. Please ensure you’re not just demonstrating that your functionality works - this is also an exercise in documenting and communicating your implementation. It does not need to be extremely complicated, but we expect something slightly more coherent and digestible than just screenshots of your functions/code.

### Objective
In this first section, our objective is to indicate how to get NHL "data" loaded in the memory of a Jupyter notebook.
The "data" consists of all the "play-by-play" game events, for ALL NHL games of seaons 2016-2017 to 2023-2024 (including pre-season, regular and playoffs games!)
The "data" is loaded by a Python class; we provide the interface below.

### Getting the data from the web
After doing some research, we found that the NHL provides a new API to get the game data.
**Note**: as of September 2024, the old API at https://statsapi.web.nhl.com is completly inactive.

The new API is at this address: https://api-web.nhle.com
To get the play-by-play data of a game, we need to send this GET command:
```
https://api-web.nhle.com/v1/gamecenter/{GAME_ID}/play-by-play
```
where "GAME_ID" is a unique identifier of a NHL game.

### Finding all game Ids of a season


### Class NHLDataProvider
This class is used to load NHL game data into memory.

#### Interface
```
def get_game_events(self, season_list):
   """ This method returns a Panda Dataframe of ALL the games found in the season list
      The dataframe will contain the following columns:
      game_id, game_type, period, period_type, team, coord, shooter, goalie, shot_type, goal_type
   """
```

###


## 2. Interactive Debugging Tool
1. Implement an ipywidget (or interactive tool of your choosing) that allows you to flip through all of the events, for every game of a given season, with the ability to switch between the regular season and playoffs. Draw the event coordinates on the provided ice rink image, similar to the example shown below (you can just print the event data when there are no coordinates). You may also print whatever information you find useful, such as game metadata/boxscores, and event summaries (but this is not required). Take a screenshot of the tool and add it to the blog post, accompanied with the code for the tool and a brief (1-2 sentences) description of what your tool does. You do not need to worry about embedding the tool into the blogpost.
### Description of the Debugging Tool
We have implemented 3 widgets for the selection of the game ID: the first slider represents the year, the second, the type of game (regular season or playoffs), and the third, the specific game number. The user is able to select a specific game, and the information about the home team and away team will be displayed. Afterwards, they can choose to view a specific event in the game, where they will see the coordinates of the event on the rink, along with other relevant data obtained from the JSON files.

### Screenshots of the Tool
<img src="/assets/images/debugger_tool_1.png" alt="Debugger Tool 1">
<img src="/assets/images/debugger_tool_2.png" alt="Debugger Tool 2">
<img src="/assets/images/debugger_tool_3.png" alt="Debugger Tool 3">

### Screenshots of our Code
<img src="/assets/images/debugger_code_1.png" alt="Debugger Code 1">
<img src="/assets/images/debugger_code_2.png" alt="Debugger Code 2">
<img src="/assets/images/debugger_code_3.png" alt="Debugger Code 3">
<img src="/assets/images/debugger_code_4.png" alt="Debugger Code 4">
<img src="/assets/images/debugger_code_5.png" alt="Debugger Code 5">
<img src="/assets/images/debugger_code_6.png" alt="Debugger Code 6">

## 3. Tidy Data
1. In your blog post, include a small snippet of your final dataframe (e.g. using head(10)). You can just include a screenshot rather than fighting to get the tables neatly formatted in HTML/markdown.

2. In a few sentences, discuss at least 3 additional features you could consider creating from the data available in this dataset. We’re not looking for any particular answers, but if you need some inspiration, could a shot or goal be classified as a rebound/shot off the rush (explain how you’d determine these!) ?


## 4. Simple Visualizations
### 4.1 Shot types
<img src="/assets/images/simple_viz_shot_types.png" alt="2023-2044 Season Shot Types Bar plot">
Above, we can see 2 bar plots presenting data for shot types of Season 2023-2024.
Each bar represent a shot type used by NHL players. There is one bar (total) that contains the sum of all shot types.  

Bar plots are the best visualization method for this kind of data: we can clearly seperate the shot-types, while the height of each bar indicates relative information between them.  

The top bar plot indicates how many shots and goals were made during the 2023-2024 Season. Note that bar height includes goals (red protion) and the sum of shot-on-goal and missed-shots (blue portion).  

The bottom bar plot indicates the percentage of goals for each shot type. From this second bar plot, we can draw interesting conclusions:
- In general, when a player makes a shot, he has 8% chances to score a goal
- "Snap" shots are a mix of writst and slap shot. They are more effective (10%) than the two others (8% and 7% respectively). You can have more details about those shot types on the [Hockey Monkey](https://www.hockeymonkey.com/learn/types-of-hockey-shots) web site.
- The most dangerous type of shot is a "Cradle" shot. This shot is the least used because it requires a lot of finesse from the player. But the players who can master this type of shot have much more chances of scoring. We sometimes refer to those players as having "golden hands".


### 4.2 Shot vs distance
2. What is the relationship between the distance a shot was taken and the chance it was a goal? Produce a figure for each season between 2018-19 to 2020-21 to answer this, and add it to your blog post along with a couple of sentences describing your figure. Has there been much change over the past three seasons? Why did you choose this figure?

### 4.2 Shot vs distance and shot-type
3. Combine the information from the previous sections to produce a figure that shows the goal percentage (# goals / # shots) as a function of both distance from the net, and the category of shot types (you can pick a single season of your choice). Briefly discuss your findings; e.g. what might be the most dangerous types of shots?


## 5. Advanced Visualizations: Shot Maps
1. Export the 4 plot offensive zone plots to HTML, and embed it into your blog post. Your plot must allow users to select any team during the selected season.
   Note: Because you can find these figures on the internet, answering these questions without producing these figures will not get you any marks!

2. Discuss (in a few sentences) what you can interpret from these plots.

4. Consider the Colorado Avalanche; take a look at their shot map during the 2016-17 season. Discuss what you could say about the team during this season. Now look at the shot map for the Colorado Avalanche for the 2020-21 season, and discuss what you could conclude from these differences. Does this make sense? Hint: look at the standings.

5. Consider the Buffalo Sabres, which have been a team that has struggled over recent years, and compare them to the Tampa Bay Lightning, a team which has won the Stanley for two years in a row. Look at the shot maps for these two teams from the 2018-19, 2019-20, and 2020-21 seasons. Discuss what observations you can make. Is there anything that could explain the Lightning’s success, or the Sabres’ struggles? How complete of a picture do you think this paints?



s
